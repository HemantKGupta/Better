import java.util.Arrays;
import java.util.List;

public class BinaryToBST {

	public static void main(String[] args) {

	}
	
	// This function converts a given Binary Tree to BST
	public static void binaryTreeToBST (BNode root)
	{
	    if(root == null)
	       return;
	 
	   
	    int n = countNodes (root);
	 
	    //Store inorder traversal of tree in arr[]
	    int[] arr = new int[n];
	    int i = 0;
	    storeInorder (root, arr);
	 
	    Arrays.sort(arr);
	 
	    // Copy array elements back to Binary Tree
	    i = 0;
	    arrayToBST (arr, root);
	 
	  
	}
	
	public static int index2;
	/* A helper function that copies contents of arr[] to Binary Tree. 
	   This functon basically does Inorder traversal of Binary Tree and 
	   one by one copy arr[] elements to Binary Tree nodes */
	public static void arrayToBST (int[] arr, BNode root)
	{
	    // Base Case
	    if (root == null)
	      return;
	 
	    /* first update the left subtree */
	    arrayToBST (arr, root.left);
	 
	    /* Now update root's data and increment index */
	    root.data = arr[index2];
	    index2++;
	 
	    /* finally update the right subtree */
	    arrayToBST (arr, root.right);
	}
	
	/* A helper function to count nodes in a Binary Tree */
	public static int countNodes (BNode root)
	{
	    if (root == null)
	     return 0;
	    return countNodes (root.left) +
	           countNodes (root.right) + 1;
	}
	 
	public static int index;

	public static void storeInorder(BNode node, int[] in) {
		if (node == null)
			return;
		storeInorder(node.left, in);
		in[index]= node.data;
		index++;
		storeInorder(node.right, in);
	}

}
